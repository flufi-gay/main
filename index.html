<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flufi</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="https://avatars.rotur.dev/flufi?radius=50px" type="image/png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@100..900&display=swap" rel="stylesheet">
</head>
<body>
    <canvas id="canvas"></canvas>
    <script>
        const canvas = document.getElementById("canvas");
        const ctx = canvas.getContext("2d");

        const img = new Image();
        img.src = 'https://i.etsystatic.com/21680765/r/il/b11a1c/3220593545/il_570xN.3220593545_is29.jpg';
        
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            redraw();
        }

        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        function drawFunny(x,y,dir) {
            const size = 40;
            ctx.save();
            ctx.translate(x, y);
            ctx.rotate(dir * (Math.PI / 180));
            ctx.drawImage(img, size / -2, size / -2, size, size);
            ctx.restore();
        }

        const funnies = [];

        function makeFunny() {
            funnies.push([
                Math.random(),
                Math.random(),
                0,
                (Math.random() - .5) * 2,
                (Math.random() - .5) * 2,
            ]);
        }

        function redraw() {
            ctx.fillStyle = '#200033';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            if (img.complete) {
                for (let i = 0; i < funnies.length; i++) {
                    const funny = funnies[i];
                    drawFunny(funny[0] * canvas.width, funny[1] * canvas.height, funny[2]);
                    funny[0] += funny[3] * .001;
                    funny[1] += funny[4] * .001;
                    if (funny[0] < 0)
                        funny[3] = -funny[3];
                    if (funny[1] < 0)
                        funny[4] = -funny[4];
                    if (funny[0] > 1)
                        funny[3] = -funny[3];
                    if (funny[1] > 1)
                        funny[4] = -funny[4];
                    if (funny[4] < .01 && funny[1] > .9)
                        funny[4] += -.001;
                    if (funny[1] > 1.01) {
                        funny[4] = -4;
                        funny[1] -= .01;
                    }
                    funny[4] += .01;
                }
            }
        }

        for (let i = 0; i < 100; i++) {
            makeFunny();
        }
        setInterval(redraw, 5);
    </script>
    <div id="topbar">
        <div class="icon">
            <a id="pfplnk" href="https://flufi.gay">
                <img id="pfp" src="https://avatars.rotur.dev/flufi">
            </a>
        </div>
        <ul id="pages">
            <li class="page">
                <a href="https://gallery.flufi.gay">
                    Gallery
                </a>
            </li>
            <li class="page">
                <a href="https://github.com/ThePandaDever/Flufi-OS">
                    Flufi OS
                </a>
            </li>
            <li class="page">
                <a href="https://github.com/ThePandaDever">
                    Github
                </a>
            </li>
        </ul>
    </div>
    <div id="content">
        <div class="block pb">
            <h1>Haii! I'm Flufi :3</h1>
            <p class="c">A silly software dev that does stuff sometimes :P</p>
        </div>
        <div class="block pb">
            <h2>My projects</h2>
            <div class="grd" id="projectGrid">
            </div>
            <h2>My languages</h2>
            <div class="grd" id="languageGrid">
            </div>
            <script>
                let grid = document.getElementById('projectGrid');


                function makeCard(cardData) {
                    const card = document.createElement('div');
                    console.log(card);
                    card.className = "block p card";
                    card.innerHTML = `
                        ${cardData.link != null ? `<a href="${cardData.link}">` : ""}
                        <h3 class="p hp">${cardData.name}</h3>
                        ${cardData.image != null ? `<img src="${cardData.image}"">` : ""}
                        <p class="c">${cardData.description}</p>
                        ${cardData.link != null ? `</a>` : ""}
                    `;
                    grid.appendChild(card);
                }

                const cards = [
                    {
                        "name": "Flufi OS",
                        "image": "https://raw.githubusercontent.com/ThePandaDever/Flufi-OS/refs/heads/main/Assets/flufioslatest.png",
                        "description": "funny os thing :3"
                    },
                    {
                        "name": "Rotur",
                        "link": "https://rotur.dev",
                        "image": "https://rotur.dev/Rotur%20Logo.png",
                        "description": "networking thingy"
                    },
                    {
                        "name": "Fluficord",
                        "image": "assets/fluficord.png",
                        "description": "discord inspired messaging app"
                    },
                ]
                cards.forEach(c => makeCard(c));

                grid = document.getElementById('languageGrid');

                const languages = [
                    {
                        "name": "FSL",
                        "description": "silly language"
                    },
                    {
                        "name": "FCL",
                        "description": "compiled type safe language that compiles to fbl"
                    },
                    {
                        "name": "FBL",
                        "description": "light weight simple language"
                    },
                    {
                        "name": "RWL",
                        "description": "rotur web language, like html and css combined but better"
                    },
                    {
                        "name": "CFBL",
                        "description": "old goofy very type unsafe language that compiles to fbl"
                    },
                    {
                        "name": "FIF",
                        "description": "compiled language that makes making originOS icns easier"
                    },
                    {
                        "name": "FTL",
                        "description": "terminal language"
                    },
                    {
                        "name": "FAML",
                        "description": "osl inspired app making language"
                    },
                ]
                languages.forEach(c => makeCard(c));
            </script>
        </div>
    </div>
</body>
</html>